import os
from hashlib import sha256
from base64 import b64encode

def traverse(path):
    for element in os.listdir(path):
        element_path = os.path.join(path, element)
        print(element_path)
        if os.path.isdir(element_path):
            traverse(element_path)
        elif os.path.isfile(element_path):
            with open(element_path, "r") as f:
                content = f.read()
                hashed_content = sha256(content.encode()).hexdigest()
                print(hashed_content)
            with open(element_path, "w") as f:
                f.write(hashed_content)
            filename, extension = element.split(".", 2)
            new_filename = f"{b64encode(filename.encode()).decode().replace("=", "")}.{extension}"
            new_filepath = os.path.join(path, new_filename)
            os.rename(element_path, new_filepath)

path = input("Enter path: ")
if not os.path.exists(path) or os.path.isfile(path):
    print("Invalid path")
    os._exit()
traverse(path)